@model IEnumerable<Servicely.Models.Request>

@{
    ViewBag.Title = @Servicely.Languages.Language.Index;
    if (Session["Layout"] != null)
        Layout = Session["Layout"].ToString(); 
    else
    Layout = "~/Views/Shared/_Layout.cshtml"; 
}
@*<script src="~/scripts/jquery-3.4.1.js"></script>*@
<link href="~/css/addons/datatables.min.css" rel="stylesheet" />
<script src="~/js/addons/datatables.min.js"></script>
<script>

    $(function () {


        var seesion;
        $.ajax({
            url: "/Addresses/Sessionvalue",
            data: "",
            async: false,
            success: function (res) {

                seesion = res;

            }
        });
        if (seesion == "ar-EG") {

            $("#requestType").change(function () {


                var data = $("#requestType").val();
                $(".tt").empty();
                $.ajax({

                    url: "/Requests/requestType",
                    data: { id: data },
                    success: function (res) {

                        $.each(res, function (i, row) {


                            $("#dtBasicExample tbody").append("<tr class='tt'> <td> " + row.citizen_national_id + " </td>  <td> " + row.citizen_first_name_arabic + " " + row.citizen_second_name_arabic + " " + row.citizen_third_name_arabic + " " + row.citizen_fourth_name_arabic + " </td>  <td> " + row.address_arabic + " </td>  <td> " + row.service_name + " </td>   <td> " + row.language_arabic + " </td>  <td> " + row.quantity + " </td>  <td> " + row.governmentAgency + " </td>  <td>" + row.date + "  </td>  </tr>");
                        });


                    }


                });


            });

            $(document).ready(function () {
                $('#dtBasicExample').DataTable();
                $('.dataTables_length').addClass('bs-select');

                $('#dtBasicExample').mdbEditor({
                    headerLength: 6,
                    evenTextColor: '#000',
                    oddTextColor: '#000',
                    bgEvenColor: '',
                    bgOddColor: '',
                    thText: '',
                    thBg: '',
                    modalEditor: true,
                    bubbleEditor: true,
                    contentEditor: true,
                    rowEditor: true
                });



            });

        }

        else {

            $("#requestType").change(function () {


                var data = $("#requestType").val();
                $(".tt").empty();
                $.ajax({

                    url: "/Requests/requestType",
                    data: { id: data },
                    success: function (res) {

                        $.each(res, function (i, row) {


                            $("#dtBasicExample tbody").append("<tr class='tt'> <td> " + row.citizen_national_id + " </td>  <td> " + row.citizen_first_name + " " + row.citizen_second_name + " " + row.citizen_third_name + " " + row.citizen_fourth_name + " </td>  <td> " + row.address + " </td>  <td> " + row.service_name + " </td>   <td> " + row.language + " </td>  <td> " + row.quantity + " </td>  <td> " + row.governmentAgency + " </td>  <td>" + row.date + "  </td>  </tr>");
                        });


                    }


                });


            });

            $(document).ready(function () {
                $('#dtBasicExample').DataTable();
                $('.dataTables_length').addClass('bs-select');

                $('#dtBasicExample').mdbEditor({
                    headerLength: 6,
                    evenTextColor: '#000',
                    oddTextColor: '#000',
                    bgEvenColor: '',
                    bgOddColor: '',
                    thText: '',
                    thBg: '',
                    modalEditor: true,
                    bubbleEditor: true,
                    contentEditor: true,
                    rowEditor: true
                });



            });
        }


    });

</script>


<div class="container mt-5" style="border:5px solid red;">
    <div class="container">
        <h2 class="mt-5"> @Servicely.Languages.Language.RequstsIndex</h2>
        <p>
            @Html.ActionLink(Servicely.Languages.Language.Create_New, "Create")
        </p>
        <hr />
        <div class="row">
            <div class="col-5">
                <div class="row">
                    <div class="col-12">

                    </div>
                </div>

                <div class="row">
                    <div class="col-12">
                        @Html.DropDownList("requestType", null, "", new { @class = "selectpicker", required = "required" })

                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <table id="tb" class="mt-4">
                        </table>
                    </div>
                </div>

            </div>

        </div>
        <div class="row mt-3 mb-5">
            <div class="col-12 ">
                <table id="dtBasicExample" class="table table-striped table-sm table-bordered" cellspacing="0" width="100%">

                    <thead>
                        <tr>
                            <th class="th-sm">
                                @Servicely.Languages.Language.CitizenNationalId
                            </th>
                            <th class="th-sm">
                                @Servicely.Languages.Language.CitizenName
                            </th>
                            <th class="th-sm">
                                @Servicely.Languages.Language.Address
                            </th>
                            <th class="th-sm">
                                @Servicely.Languages.Language.Service
                            </th>
                            <th class="th-sm">
                                @Servicely.Languages.Language.language
                            </th>
                            <th class="th-sm">
                                @Servicely.Languages.Language.Quantity
                            </th>

                            <th class="th-sm">
                                @Servicely.Languages.Language.Date
                            </th>
                            <th class="th-sm">
                                @Servicely.Languages.Language.governmentAgency
                            </th>


                            @*<th class="th-sm">   </th>
                                <th class="th-sm">   </th>*@
                        </tr>
                    </thead>

                    <tbody id="tbm">
                    </tbody>


                </table>
            </div>

        </div>

    </div>

</div>


