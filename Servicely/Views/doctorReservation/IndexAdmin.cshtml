@model IEnumerable<Servicely.Models.ReservationScheduleM_M>
@{
    ViewBag.Title = Servicely.Languages.Language.IndexAdmin;
    if (Session["Layout"] != null)
    { Layout = Session["Layout"].ToString(); }

    else
    { Layout = "~/Views/Shared/_Layout.cshtml"; }
}

<script>

    $(function () {


        var delete1 = null;
        $("#citizen").select2();
        $("a[name]").click(function () {
            alert($(".dell").attr("name"));
            $("#exampleModal1").modal('show');
            $.ajax({
                url: "/doctorReservation/DeleteJson",
                data: {id:$(".dell").attr("name")},
               async: false,
               success: function (res) {
                   $("#exampleModal1").modal('hide');
                   $("#exampleModalxx").modal("show");
                   $("#modelbody11").text(res);
                    
               }
        });
        });
        var seesion;
        $.ajax({
            url: "/Addresses/Sessionvalue",
            data: "",
            async: false,
            success: function (res) {

                seesion = res;

            }
        });

        if (seesion == "ar-EG") {
           $("#citizen").change(function () {

                $(".tt").empty();
                $.ajax({
                    url: "/doctorReservation/GetIndexOfUser",
                    data: { Id: $("#citizen").val() },

                    success: function (res) {


                        $.each(res, function (i, r) {


                            $("#tb").append("<tr class='tt'>  <td> " + r.Reservation_date + "  </td>  <td> " + r.hospital_name_arabic + "  </td>  <td> " + r.citizen_first_name_arabic1 + " " + r.citizen_second_name_arabic1 + " " + r.citizen_third_name_arabic1 + " " + r.citizen_fourth_name_arabic1 + "  </td> <td> " + r.citizen_first_name_arabic + " " + r.citizen_second_name_arabic + " " + r.citizen_third_name_arabic + " " + r.citizen_fourth_name_arabic + "  </td><td> " + r.district_arabic_name + "  </td> <td> " + r.checkup_date + " from " + r.checkup_start + " to " + r.checkup_end + "  </td>  <td> <a class='dell'  href='/doctorReservation/Delete/"+r.healthcareReservation_id+"'> <i class='fa fa-trash-alt'>   </i>  </a>  </td></tr>");
                            

                        });


                    }


                });

            });

            $("#btn1").click(function () {
                var from = $("#datefrom").val();
                var to = $("#dateto").val();
                $(".tt1").empty();
                if (from != "" && to != "") {
              
                    $(".tt").empty();
                    $.ajax({
                        url: "/doctorReservation/GetIndexOfUser2",
                        data: { from: from, to: to },
                        async: false,
                        success: function (res) {


                            $.each(res, function (i, r) {

                   // $("#tb1").append("<tr class='tt'>  <td> " + r.Reservation_date + "  </td>  <td> " + r.hospital_name_arabic + "  </td>  <td> " + r.citizen_first_name_arabic1 + " " + r.citizen_second_name_arabic1 + " " + r.citizen_third_name_arabic1 + " " + r.citizen_fourth_name_arabic1 + "  </td> <td> " + r.citizen_first_name_arabic + " " + r.citizen_second_name_arabic + " " + r.citizen_third_name_arabic + " " + r.citizen_fourth_name_arabic + "  </td><td> " + r.district_arabic_name + "  </td> <td> " + r.checkup_date + " from " + r.checkup_start + " to " + r.checkup_end + "  </td>  </tr>");

                      $("#tb1").append("<tr class='tt'>  <td> " + r.Reservation_date + "  </td>  <td> " + r.hospital_name_arabic + "  </td>  <td> " + r.citizen_first_name_arabic1 + " " + r.citizen_second_name_arabic1 + " " + r.citizen_third_name_arabic1 + " " + r.citizen_fourth_name_arabic1 + "  </td> <td> " + r.citizen_first_name_arabic + " " + r.citizen_second_name_arabic + " " + r.citizen_third_name_arabic + " " + r.citizen_fourth_name_arabic + "  </td><td> " + r.district_arabic_name + "  </td> <td> " + r.checkup_date + " from " + r.checkup_start + " to " + r.checkup_end + "  </td>  <td> <a class='dell' href='/doctorReservation/Delete/"+r.healthcareReservation_id+"'>   </i>  </a>  </td></tr>");
                                $("#del").addClass('text-primary');

                            });
                             

                        }


                    });
                    $("#exampleModal3").modal('show');
                   
                }
               
            });
            $("#btn").click(function () {

                
                $(".tt").empty();
                var form = $("#form");
                var from = $("#datefrom").val();
                var to = $("#dateto").val();
                $(".tt").empty();
                if (from != "" && to != "" && $("#citzen").val() != "") {
                    $(".tt").empty();
                    $.ajax({
                        url: "/doctorReservation/GetIndexOfUser1",
                        data: { Id: $("#citizen").val(), from: from, to: to },
                        async: false,
                        success: function (res) {


                            $.each(res, function (i, r) {


                                //$("#tb").append("<tr class='tt'>  <td> " + r.Reservation_date + "  </td>  <td> " + r.hospital_name_arabic + "  </td>  <td> " + r.citizen_first_name_arabic1 + " " + r.citizen_second_name_arabic1 + " " + r.citizen_third_name_arabic1 + " " + r.citizen_fourth_name_arabic1 + "  </td> <td> " + r.citizen_first_name_arabic + " " + r.citizen_second_name_arabic + " " + r.citizen_third_name_arabic + " " + r.citizen_fourth_name_arabic + "  </td><td> " + r.district_arabic_name + "  </td> <td> " + r.checkup_date + " from " + r.checkup_start + " to " + r.checkup_end + "  </td>  </tr>");
                                 $("#tb").append("<tr class='tt'>  <td> " + r.Reservation_date + "  </td>  <td> " + r.hospital_name_arabic + "  </td>  <td> " + r.citizen_first_name_arabic1 + " " + r.citizen_second_name_arabic1 + " " + r.citizen_third_name_arabic1 + " " + r.citizen_fourth_name_arabic1 + "  </td> <td> " + r.citizen_first_name_arabic + " " + r.citizen_second_name_arabic + " " + r.citizen_third_name_arabic + " " + r.citizen_fourth_name_arabic + "  </td><td> " + r.district_arabic_name + "  </td> <td> " + r.checkup_date + " from " + r.checkup_start + " to " + r.checkup_end + "  </td>  <td> <a class='dell'  href='/doctorReservation/Delete/"+r.healthcareReservation_id+"'>   </i>  </a>  </td></tr>");

                                $("#del").addClass('text-primary');
                            });


                        }


                    });
                }
                



            });
        }
        else {
            
            $("#citizen").change(function () {

                $(".tt").empty();
                $.ajax({
                    url: "/doctorReservation/GetIndexOfUser",
                    data: { Id: $("#citizen").val() },
                    async: false,
                    success: function (res) {


                        $.each(res, function (i, r) {


                            $("#tb").append("<tr class='tt'>  <td> " + r.Reservation_date + "  </td>  <td> " + r.hospital_name + "  </td>  <td> " + r.citizen_first_name1 + " " + r.citizen_second_name1 + " " + r.citizen_third_name1 + " " + r.citizen_fourth_name1 + "  </td> <td> " + r.citizen_first_name + " " + r.citizen_second_name + " " + r.citizen_third_name + " " + r.citizen_fourth_name + "  </td><td> " + r.district_name + "  </td> <td> " + r.checkup_date + " from " + r.checkup_start + " to " + r.checkup_end + "  </td> <td> <a class='dell' href='/doctorReservation/Delete/"+r.healthcareReservation_id+"' > <i class='fa fa-trash-alt'>   </i>  </a>  </td> </tr>");
                            $(".dell").addClass('text-primary');
                             
                        });

                        
                    }


                });

            });

            $("#btn1").click(function () {
                var from = $("#datefrom").val();
                var to = $("#dateto").val();
                $(".tt1").empty();
                if (from != "" && to != "") {
              
                    $(".tt").empty();
                    $.ajax({
                        url: "/doctorReservation/GetIndexOfUser2",
                        data: { from: from, to: to },
                        async: false,
                        success: function (res) {


                            $.each(res, function (i, r) {


                                $("#tb1").append("<tr class='tt1'>  <td> " + r.Reservation_date + "  </td>  <td> " + r.hospital_name + "  </td>  <td> " + r.citizen_first_name1 + " " + r.citizen_second_name1 + " " + r.citizen_third_name1 + " " + r.citizen_fourth_name1 + "  </td> <td> " + r.citizen_first_name + " " + r.citizen_second_name + " " + r.citizen_third_name + " " + r.citizen_fourth_name + "  </td><td> " + r.district_name + "  </td> <td> " + r.checkup_date + " from " + r.checkup_start + " to " + r.checkup_end + "  </td> <td> <a class='dell' href='/doctorReservation/Delete/"+r.healthcareReservation_id+"' > <i class='fa fa-trash-alt'>   </i>  </a>  </td> </tr>");
                                $(".dell").addClass('text-primary');

                            });
                             

                        }


                    });
                    $("#exampleModal3").modal('show');
                   
                }
               
            });
            $("#btn").click(function () {

                
                $(".tt").empty();
                var form = $("#form");
                var from = $("#datefrom").val();
                var to = $("#dateto").val();
                $(".tt").empty();
                if (from != "" && to != "" && $("#citzen").val() != "") {
                    $(".tt").empty();
                    $.ajax({
                        url: "/doctorReservation/GetIndexOfUser1",
                        data: { Id: $("#citizen").val(), from: from, to: to },
                        async: false,
                        success: function (res) {


                            $.each(res, function (i, r) {


                                $("#tb").append("<tr class='tt'>  <td> " + r.Reservation_date + "  </td>  <td> " + r.hospital_name + "  </td>  <td> " + r.citizen_first_name1 + " " + r.citizen_second_name1 + " " + r.citizen_third_name1 + " " + r.citizen_fourth_name1 + "  </td> <td> " + r.citizen_first_name + " " + r.citizen_second_name + " " + r.citizen_third_name + " " + r.citizen_fourth_name + "  </td><td> " + r.district_name + "  </td> <td> " + r.checkup_date + " from " + r.checkup_start + " to " + r.checkup_end + "  </td> <td> <a class='dell' href='/doctorReservation/Delete/"+r.healthcareReservation_id+"'> <i class='fa fa-trash-alt'>   </i>  </a>  </td> </tr>");
                                $("#del").addClass('text-primary');

                            });


                        }


                    });
                }
                



            });
          

        }

        


    });
</script>

<div class="container-fluid">

    <h2>  @Servicely.Languages.Language.Index</h2>
    <div class="row">
        <div class="col-md-3">
            <label>@Servicely.Languages.Language.NationalId</label>
            @Html.DropDownList("citizen", null, "", new { @class = "form-control" })
        </div>
        <div class="col-md-9">
            <form action="" id="form">
                <div class="row">
                    <div class="col-md-3">
                        <label>@Servicely.Languages.Language.From</label>
                        <input type="date" id="datefrom" required class="form-control" />
                    </div>
                    <div class="col-md-3">
                        <label> @Servicely.Languages.Language.To </label>
                        <input type="date" id="dateto" required class="form-control" />
                    </div>
                    <div class="col-md-5 mt-4">
                        <input type="button" value="Search" class="btn btn-primary btn-sm d-inline mt-2" id="btn" />
                        <input type="button" value="Search only with date" class="btn btn-danger btn-sm mt-2" id="btn1" />
                    </div>
                </div>

            </form>
        </div>



    </div>
    <table class="table table-sm  mt-3" id="tb">
        <tr>


            <th>

                @Servicely.Languages.Language.Date
            </th>
            <th>
                @Servicely.Languages.Language.HospitalName
            </th>
            <th>
                @Servicely.Languages.Language.CitizenName
            </th>

            <th>
                @Servicely.Languages.Language.DoctorName
            </th>
            <th>
                @Servicely.Languages.Language.Address
            </th>
            <th>
                @Servicely.Languages.Language.Appointments
            </th>

            <th>

            </th>
        </tr>



    </table>

</div>

<div class="modal  fade" id="exampleModal3" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">@Servicely.Languages.Language.Reservations</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" id="modelbody">
                <table class="table" id="tb1">
                    <tr>


                        <th>

                            @Servicely.Languages.Language.Date
                        </th>
                        <th>
                            @Servicely.Languages.Language.HospitalName
                        </th>
                        <th>
                            @Servicely.Languages.Language.CitizenName
                        </th>

                        <th>
                            @Servicely.Languages.Language.DoctorName
                        </th>
                        <th>
                            @Servicely.Languages.Language.Address
                        </th>
                        <th>
                            @Servicely.Languages.Language.Appointments
                        </th>

                        <th>

                        </th>
                    </tr>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">@Servicely.Languages.Language.Close</button>


            </div>
        </div>
    </div>
</div>


<div class="modal  fade" id="exampleModal1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog ">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">@Servicely.Languages.Language.warning</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" id="modelbody">
                @Servicely.Languages.Language.Are_you_sure_you_want_to_delete_this_
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">@Servicely.Languages.Language.yes</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal">@Servicely.Languages.Language.No</button>


            </div>
        </div>
    </div>
</div>
<div class="modal  fade" id="exampleModalxx" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog ">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">@Servicely.Languages.Language.warning</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" id="modelbody11">
              
            </div>
            <div class="modal-footer">

                <button type="button" class="btn btn-danger" data-dismiss="modal">@Servicely.Languages.Language.Close</button>


            </div>
        </div>
    </div>
</div>